<!DOCTYPE html>
<html>
<head>
    <title>Wave Function Collapse Simulation</title>
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: repeat(100, 10px);
        }
        .grid-item {
            width: 10px;
            height: 10px;
            background-color: white;
        }
        .black {
            background-color: black;
        }
    </style>
</head>
<body>
    <div class="grid-container" id="gridContainer"></div>

    <script>
        const gridContainer = document.getElementById('gridContainer');

        // Function to check if a 2x2 block is uniformly colored or checkered
        function isInvalid2x2(x, y, grid, isBlack) {
            if (x <= 0 || y <= 0) return false;

            // Check for uniform color
            let uniformColor = grid[x - 1][y] === isBlack && grid[x][y - 1] === isBlack && grid[x - 1][y - 1] === isBlack;

            // Check for checkered pattern
            let checkeredPattern = (grid[x - 1][y] !== isBlack) && (grid[x][y - 1] !== isBlack) && (grid[x - 1][y - 1] === isBlack);

            return uniformColor || checkeredPattern;
        }

        // Function to create the grid
        function createGrid() {
            const grid = Array.from({ length: 100 }, () => Array(100).fill(false));

            for (let x = 0; x < 100; x++) {
                for (let y = 0; y < 100; y++) {
                    let isBlack = Math.random() < 0.5;
                    if (isInvalid2x2(x, y, grid, isBlack)) {
                        isBlack = !isBlack; // Flip color to avoid invalid 2x2 block
                    }
                    grid[x][y] = isBlack;

                    // Create the grid item
                    const item = document.createElement('div');
                    item.classList.add('grid-item');
                    if (isBlack) item.classList.add('black');
                    gridContainer.appendChild(item);
                }
            }
        }

        // Initialize the grid
        createGrid();
    </script>
</body>
</html>
